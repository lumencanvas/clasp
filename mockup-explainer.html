<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLASP: The Universal Protocol Translator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Space+Mono:wght@400;700&family=Archivo+Black&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg: #f4f1e8;
            --ink: #1a1a1a;
            --accent: #e63946;
            --accent2: #457b9d;
            --accent3: #2a9d8f;
            --accent4: #f77f00;
            --paper: #fefcf6;
            --shadow: rgba(0,0,0,0.15);
            --grain: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence 
type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' 
filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }
        
        html {
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Space Mono', monospace;
            background: var(--bg);
            color: var(--ink);
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        section {
            min-height: 100vh;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            overflow: hidden;
        }
        
        section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--grain);
            opacity: 0.03;
            pointer-events: none;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            position: relative;
            z-index: 1;
        }
        
        h1 {
            font-family: 'Archivo Black', sans-serif;
            font-size: clamp(3rem, 10vw, 6rem);
            line-height: 0.95;
            text-transform: uppercase;
            letter-spacing: -0.03em;
        }
        
        h2 {
            font-family: 'Archivo Black', sans-serif;
            font-size: clamp(1.8rem, 5vw, 3rem);
            text-transform: uppercase;
            letter-spacing: -0.02em;
            margin-bottom: 1.5rem;
        }
        
        h3 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
            color: var(--accent);
        }
        
        p {
            font-size: 1.1rem;
            max-width: 600px;
            margin-bottom: 1rem;
        }
        
        .small {
            font-size: 0.85rem;
            opacity: 0.7;
        }
        
        code {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0,0,0,0.1);
            padding: 0.1em 0.3em;
            font-size: 0.9em;
        }
        
        .icon {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
        }
        
        .icon-lg {
            width: 48px;
            height: 48px;
        }
        
        /* HERO */
        #hero {
            background: var(--ink);
            color: var(--paper);
        }
        
        .logo-mark {
            width: 150px;
            height: 150px;
            margin-bottom: 2rem;
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        #hero .subtitle {
            font-size: 1rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-top: 1.5rem;
            opacity: 0.7;
        }
        
        .scroll-hint {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            animation: bounce 2s ease-in-out infinite;
            opacity: 0.5;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }
        
        /* PROBLEM */
        #problem {
            background: var(--paper);
        }
        
        .protocol-chaos {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .protocol-box {
            background: var(--bg);
            border: 3px solid var(--ink);
            padding: 1rem;
            text-align: center;
            font-weight: 700;
            font-size: 0.9rem;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .protocol-box:hover {
            transform: rotate(-2deg) scale(1.05);
            background: var(--accent);
            color: var(--paper);
        }
        
        .protocol-box::before {
            content: '';
            position: absolute;
            inset: 4px;
            border: 1px dashed var(--ink);
            opacity: 0.3;
        }
        
        .protocol-box .year {
            display: block;
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 0.25rem;
        }
        
        /* SOLUTION */
        #solution {
            background: var(--accent);
            color: var(--paper);
        }
        
        .router-diagram {
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(0,0,0,0.1);
            border-radius: 4px;
        }
        
        .router-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }
        
        .inputs, .outputs {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.75rem;
        }
        
        .protocol-node {
            background: var(--paper);
            color: var(--ink);
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            font-weight: 700;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .protocol-node:hover {
            border-color: var(--ink);
            transform: translateY(-3px);
        }
        
        .protocol-node.active {
            background: var(--ink);
            color: var(--paper);
        }
        
        .router-core {
            width: 150px;
            height: 150px;
            background: var(--paper);
            color: var(--ink);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.5rem;
            position: relative;
            margin: 1.5rem 0;
            animation: routerPulse 2s ease-in-out infinite;
        }
        
        @keyframes routerPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255,255,255,0.4); }
            50% { box-shadow: 0 0 0 20px rgba(255,255,255,0); }
        }
        
        .router-core .small {
            font-family: 'Space Mono', monospace;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .flow-arrow {
            font-size: 2rem;
            opacity: 0.5;
        }
        
        /* SIGNAL TYPES */
        #signal-types {
            background: var(--bg);
        }
        
        .signal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .signal-card {
            background: var(--paper);
            border-left: 4px solid var(--accent);
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .signal-card:nth-child(2) { border-color: var(--accent2); }
        .signal-card:nth-child(3) { border-color: var(--accent3); }
        .signal-card:nth-child(4) { border-color: var(--accent4); }
        .signal-card:nth-child(5) { border-color: #9b5de5; }
        
        .signal-card:hover {
            transform: translateX(5px);
        }
        
        .signal-card h4 {
            font-family: 'Archivo Black', sans-serif;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }
        
        .signal-card p {
            font-size: 0.85rem;
            margin: 0;
            opacity: 0.8;
        }
        
        .signal-card .example {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            background: var(--bg);
            padding: 0.5rem;
            margin-top: 0.75rem;
            opacity: 0.9;
        }
        
        /* SIGNAL DEMO */
        #signal-demo {
            background: var(--ink);
            color: var(--paper);
        }
        
        .signal-demo-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }
        
        @media (max-width: 700px) {
            .signal-demo-container {
                grid-template-columns: 1fr;
            }
        }
        
        .signal-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .signal-selector button {
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: var(--paper);
            padding: 0.5rem 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
        }
        
        .signal-selector button:hover,
        .signal-selector button.active {
            background: var(--accent);
            border-color: var(--accent);
        }
        
        .signal-explanation {
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
        }
        
        .signal-explanation h4 {
            font-size: 1rem;
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .signal-explanation p {
            font-size: 0.95rem;
            margin-bottom: 0.75rem;
            max-width: none;
        }
        
        .signal-code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            background: rgba(0,0,0,0.3);
            padding: 1rem;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.5;
        }
        
        /* STEPS */
        #how-it-works {
            background: var(--paper);
        }
        
        .step-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .step {
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
            padding: 1.5rem;
            background: var(--bg);
            border-left: 4px solid var(--accent);
            transition: all 0.3s ease;
        }
        
        .step:hover {
            transform: translateX(10px);
        }
        
        .step-number {
            font-family: 'Archivo Black', sans-serif;
            font-size: 2rem;
            color: var(--accent);
            line-height: 1;
        }
        
        .step-content h4 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        
        .step-content p {
            font-size: 0.95rem;
            margin: 0;
            opacity: 0.8;
        }
        
        /* DISCOVERY */
        #discovery {
            background: var(--accent2);
            color: var(--paper);
        }
        
        .discovery-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .discovery-card {
            background: rgba(255,255,255,0.1);
            padding: 1.5rem;
            position: relative;
        }
        
        .discovery-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--paper);
        }
        
        .discovery-card h4 {
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.75rem;
        }
        
        .discovery-card p {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            max-width: none;
        }
        
        .discovery-card code {
            background: rgba(0,0,0,0.2);
            display: block;
            padding: 0.5rem;
            margin-top: 0.75rem;
            font-size: 0.8rem;
        }
        
        /* TIMING */
        #timing {
            background: var(--bg);
        }
        
        .timing-diagram {
            background: var(--paper);
            padding: 2rem;
            margin: 2rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
        }
        
        .timing-visual {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .timing-node {
            text-align: center;
            z-index: 1;
        }
        
        .timing-node .label {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .timing-node .time {
            background: var(--accent);
            color: var(--paper);
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
        }
        
        .timing-line {
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 2px;
            background: var(--ink);
            z-index: 0;
        }
        
        .timing-formula {
            background: var(--bg);
            padding: 1rem;
            text-align: center;
        }
        
        /* MESSAGES */
        #messages {
            background: var(--accent3);
            color: var(--paper);
        }
        
        .message-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .message-item {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .message-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-3px);
        }
        
        .message-item .code-hex {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            opacity: 0.6;
            margin-bottom: 0.25rem;
        }
        
        .message-item .name {
            font-weight: 700;
            font-size: 0.9rem;
        }
        
        .message-item .desc {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-top: 0.25rem;
        }
        
        /* LATENCY */
        #latency {
            background: var(--ink);
            color: var(--paper);
        }
        
        .latency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .latency-card {
            background: rgba(255,255,255,0.05);
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .latency-card:hover {
            transform: translateY(-5px);
        }
        
        .latency-value {
            font-family: 'Archivo Black', sans-serif;
            font-size: 2.5rem;
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        
        .latency-unit {
            font-size: 1rem;
            opacity: 0.7;
        }
        
        .latency-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 0.5rem;
            opacity: 0.8;
        }
        
        .latency-context {
            font-size: 0.75rem;
            margin-top: 0.5rem;
            opacity: 0.5;
        }
        
        /* BRIDGES */
        #bridges {
            background: var(--paper);
        }
        
        .bridge-diagram {
            margin: 2rem 0;
            padding: 2rem;
            background: var(--bg);
        }
        
        .bridge-visual {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .bridge-row {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .bridge-protocol {
            flex: 1;
            background: var(--paper);
            padding: 0.75rem 1rem;
            font-weight: 700;
            font-size: 0.85rem;
            text-align: center;
            border: 2px solid var(--ink);
        }
        
        .bridge-arrow {
            font-size: 1.5rem;
            opacity: 0.5;
        }
        
        .bridge-clasp {
            flex: 2;
            background: var(--accent);
            color: var(--paper);
            padding: 0.75rem 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            text-align: center;
        }
        
        /* TRANSPORTS */
        #transports {
            background: var(--accent2);
            color: var(--paper);
        }
        
        .transport-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .transport-card {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .transport-card:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .transport-card h4 {
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }
        
        .transport-card p {
            font-size: 0.7rem;
            margin: 0;
            opacity: 0.7;
        }
        
        /* CROSS LANG */
        #cross-lang {
            background: var(--accent4);
            color: var(--paper);
        }
        
        .lang-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .lang-tabs button {
            background: transparent;
            border: 2px solid var(--paper);
            color: var(--paper);
            padding: 0.5rem 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .lang-tabs button:hover,
        .lang-tabs button.active {
            background: var(--paper);
            color: var(--ink);
        }
        
        .code-panel {
            background: var(--ink);
            color: var(--paper);
            padding: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            overflow-x: auto;
            display: none;
        }
        
        .code-panel.active {
            display: block;
        }
        
        .code-panel .comment { color: #6a9955; }
        .code-panel .keyword { color: #c586c0; }
        .code-panel .string { color: #ce9178; }
        .code-panel .function { color: #dcdcaa; }
        .code-panel .variable { color: #9cdcfe; }
        
        /* PROTOCOLS */
        #protocols {
            background: var(--bg);
        }
        
        .protocol-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .protocol-card {
            background: var(--paper);
            padding: 1rem;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .protocol-card:hover {
            border-color: var(--ink);
            transform: translateY(-3px);
        }
        
        .protocol-card .icon {
            margin-bottom: 0.5rem;
        }
        
        .protocol-card h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }
        
        .protocol-card p {
            font-size: 0.75rem;
            margin: 0;
            opacity: 0.7;
        }
        
        /* CTA */
        #cta {
            background: var(--ink);
            color: var(--paper);
        }
        
        .cta-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            font-weight: 700;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary {
            background: var(--accent);
            color: var(--paper);
        }
        
        .btn-primary:hover {
            background: #c1121f;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: transparent;
            border: 2px solid var(--paper);
            color: var(--paper);
        }
        
        .btn-secondary:hover {
            background: var(--paper);
            color: var(--ink);
        }
        
        .install-cmd {
            background: rgba(255,255,255,0.1);
            padding: 1rem 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            margin-top: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .install-cmd:hover {
            background: rgba(255,255,255,0.15);
        }
        
        .install-cmd .prompt {
            opacity: 0.5;
        }
        
        .install-cmd .copy-hint {
            margin-left: auto;
            opacity: 0.5;
            font-size: 0.75rem;
        }
        
        footer {
            background: var(--ink);
            color: var(--paper);
            padding: 2rem;
            text-align: center;
            font-size: 0.85rem;
            opacity: 0.7;
        }
        
        footer a {
            color: var(--paper);
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease-out;
        }
        
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .stagger > * {
            opacity: 0;
            transform: translateY(20px);
        }
        
        .stagger.visible > *:nth-child(1) { animation: fadeUp 0.5s ease forwards 0.1s; }
        .stagger.visible > *:nth-child(2) { animation: fadeUp 0.5s ease forwards 0.2s; }
        .stagger.visible > *:nth-child(3) { animation: fadeUp 0.5s ease forwards 0.3s; }
        .stagger.visible > *:nth-child(4) { animation: fadeUp 0.5s ease forwards 0.4s; }
        .stagger.visible > *:nth-child(5) { animation: fadeUp 0.5s ease forwards 0.5s; }
        .stagger.visible > *:nth-child(6) { animation: fadeUp 0.5s ease forwards 0.6s; }
        .stagger.visible > *:nth-child(7) { animation: fadeUp 0.5s ease forwards 0.7s; }
        .stagger.visible > *:nth-child(8) { animation: fadeUp 0.5s ease forwards 0.8s; }
        
        @keyframes fadeUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <section id="hero">
        <div class="container">
            <svg class="logo-mark" viewBox="0 0 300 300">
                <defs>
                    <filter id="rough" x="-5%" y="-5%" width="110%" height="110%">
                        <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="5" result="noise"/>
                        <feDisplacementMap in="SourceGraphic" in2="noise" scale="2.5"/>
                    </filter>
                </defs>
                <g filter="url(#rough)">
                    <path d="M 35 150 L 35 60 Q 35 25, 70 25 L 120 25 L 120 55 L 85 55 Q 65 55, 65 75 L 65 150 L 65 225 Q 65 245, 85 245 L 120 245 L 120 275 L 70 275 Q 35 
275, 35 240 Z" fill="#f4f1e8"/>
                    <path d="M 265 150 L 265 60 Q 265 25, 230 25 L 180 25 L 180 55 L 215 55 Q 235 55, 235 75 L 235 150 L 235 225 Q 235 245, 215 245 L 180 245 L 180 275 L 
230 275 Q 265 275, 265 240 Z" fill="#f4f1e8"/>
                </g>
                <g stroke="#f4f1e8" stroke-width="6" stroke-linecap="round" filter="url(#rough)">
                    <line x1="65" y1="110" x2="235" y2="112"/>
                    <line x1="65" y1="150" x2="235" y2="148"/>
                    <line x1="65" y1="190" x2="235" y2="191"/>
                </g>
                <g filter="url(#rough)">
                    <circle cx="150" cy="150" r="28" fill="#1a1a1a" stroke="#f4f1e8" stroke-width="8"/>
                    <circle cx="150" cy="150" r="10" fill="#f4f1e8"/>
                </g>
                <g opacity="0.9" filter="url(#rough)">
                    <circle cx="150" cy="150" r="10" fill="#FF5F1F"/>
                    <rect x="60" y="146" width="20" height="8" fill="#FF5F1F"/>
                    <rect x="220" y="146" width="20" height="8" fill="#FF5F1F"/>
                </g>
            </svg>
            <h1>CLASP</h1>
            <p class="subtitle">Creative Low-Latency Application Streaming Protocol</p>
        </div>
        <div class="scroll-hint">
            <svg class="icon" viewBox="0 0 24 24"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
            <span class="small">scroll</span>
        </div>
    </section>

    <section id="problem">
        <div class="container">
            <h3>The Problem</h3>
            <h2>Creative Tools Speak Different Languages</h2>
            <p>Your lighting rig talks DMX. Your audio software speaks OSC. Your IoT sensors use MQTT. Your web interface wants WebSocket. Each protocol invented in a 
different decade, for a different purpose.</p>
            <div class="protocol-chaos fade-in">
                <div class="protocol-box">MIDI<span class="year">1983</span></div>
                <div class="protocol-box">DMX<span class="year">1986</span></div>
                <div class="protocol-box">OSC<span class="year">2002</span></div>
                <div class="protocol-box">Art-Net<span class="year">1998</span></div>
                <div class="protocol-box">MQTT<span class="year">1999</span></div>
                <div class="protocol-box">WebSocket<span class="year">2011</span></div>
                <div class="protocol-box">sACN<span class="year">2009</span></div>
                <div class="protocol-box">Socket.IO<span class="year">2010</span></div>
            </div>
            <p>Connecting them typically requires writing custom bridges for every pair of protocols you need. N protocols means N squared potential bridges.</p>
        </div>
    </section>

    <section id="solution">
        <div class="container">
            <h3>The Solution</h3>
            <h2>One Router to Connect Them All</h2>
            <p>CLASP is a universal protocol bridge and signal router. Everything connects to one central hub, which handles translation and routing automatically.</p>
            <div class="router-diagram fade-in">
                <div class="router-visual">
                    <div class="inputs stagger">
                        <div class="protocol-node">TouchOSC</div>
                        <div class="protocol-node">Ableton</div>
                        <div class="protocol-node">LED Strip</div>
                        <div class="protocol-node">Sensors</div>
                    </div>
                    <div class="flow-arrow">|</div>
                    <div class="router-core">CLASP<span class="small">Router</span></div>
                    <div class="flow-arrow">|</div>
                    <div class="outputs stagger">
                        <div class="protocol-node">Web UI</div>
                        <div class="protocol-node">IoT Hub</div>
                        <div class="protocol-node">Resolume</div>
                        <div class="protocol-node">Logging</div>
                    </div>
                </div>
            </div>
            <p>Any input can talk to any output. Add new devices without rewriting your entire setup. N protocols, just N bridges.</p>
        </div>
    </section>

    <section id="signal-types">
        <div class="container">
            <h3>Not Just Bytes</h3>
            <h2>Signals With Meaning</h2>
            <p>CLASP distinguishes signal types at the protocol level. This affects routing, storage, reliability, and how applications respond.</p>
            <div class="signal-grid stagger fade-in">
                <div class="signal-card"><h4>Param</h4><p>Stateful values with revision tracking. The router remembers the current value.</p><div 
class="example">/lights/brightness = 0.75</div></div>
                <div class="signal-card"><h4>Event</h4><p>Ephemeral triggers. They happen and are gone. Never stored.</p><div class="example">/cue/fire { id: "intro" 
}</div></div>
                <div class="signal-card"><h4>Stream</h4><p>High-rate continuous data. Occasional packet loss is acceptable.</p><div class="example">/fader/1 [0.50, 0.52, 
0.55]</div></div>
                <div class="signal-card"><h4>Gesture</h4><p>Phased input with start, move, end. Touch, pen, motion.</p><div class="example">/touch { phase: "move" 
}</div></div>
                <div class="signal-card"><h4>Timeline</h4><p>Time-indexed automation. Keyframes with easing curves.</p><div class="example">/opacity [0ms: 1.0, 1s: 
0.0]</div></div>
            </div>
        </div>
    </section>

    <section id="signal-demo">
        <div class="container">
            <h3>See the Difference</h3>
            <h2>How Signal Types Work</h2>
            <div class="signal-selector">
                <button class="active" data-signal="param">Param</button>
                <button data-signal="event">Event</button>
                <button data-signal="stream">Stream</button>
                <button data-signal="gesture">Gesture</button>
                <button data-signal="timeline">Timeline</button>
            </div>
            <div class="signal-demo-container fade-in">
                <div class="signal-explanation" id="signal-info">
                    <h4>Param: State with Conflict Resolution</h4>
                    <p>Every Param has a current value, a revision number, and knows who wrote it. When two clients write simultaneously, the router resolves conflicts 
using configurable strategies: last-write-wins, max value, min value, or exclusive locks.</p>
                    <p>Late joiners automatically receive current state. Disconnect and reconnect without losing everything.</p>
                </div>
                <div class="signal-code" id="signal-code">{
  address: "/lights/brightness",
  value: 0.75,
  revision: 42,
  writer: "session:abc",
  timestamp: 1704067200
}</div>
            </div>
        </div>
    </section>

    <section id="how-it-works">
        <div class="container">
            <h3>Architecture</h3>
            <h2>How It Works</h2>
            <div class="step-container stagger fade-in">
                <div class="step"><div class="step-number">1</div><div class="step-content"><h4>Start the Router</h4><p>The CLASP router is the central hub. All messages 
flow through it. Run <code>clasp server --port 7330</code> to start.</p></div></div>
                <div class="step"><div class="step-number">2</div><div class="step-content"><h4>Connect Protocol Bridges</h4><p>Each bridge translates between an external 
protocol and CLASP. Run <code>clasp osc --port 9000</code> for OSC, <code>clasp mqtt --host broker.local</code> for MQTT.</p></div></div>
                <div class="step"><div class="step-number">3</div><div class="step-content"><h4>Messages Get Translated</h4><p>When an OSC message arrives at 
<code>/fader/1</code>, it becomes a CLASP signal. Any subscriber to that address receives it, regardless of their native protocol.</p></div></div>
                <div class="step"><div class="step-number">4</div><div class="step-content"><h4>Use Wildcards for Flexibility</h4><p>Subscribe to <code>/lights/*</code> to 
get all light controls, or <code>/sensors/**</code> for all sensor data at any depth.</p></div></div>
            </div>
        </div>
    </section>

    <section id="discovery">
        <div class="container">
            <h3>Zero Config</h3>
            <h2>Automatic Discovery</h2>
            <p>Finding devices should not require configuration. CLASP provides three discovery mechanisms in priority order.</p>
            <div class="discovery-methods stagger fade-in">
                <div class="discovery-card"><h4>mDNS / Bonjour</h4><p>Works like finding AirPlay speakers. Devices announce themselves on the local 
network.</p><code>_clasp._tcp.local</code></div>
                <div class="discovery-card"><h4>UDP Broadcast</h4><p>Fallback when mDNS is blocked (common on enterprise networks). Simple HELLO packets on port 
7331.</p><code>255.255.255.255:7331</code></div>
                <div class="discovery-card"><h4>Rendezvous Server</h4><p>For internet discovery across networks. Devices register with a known 
server.</p><code>relay.clasp.to/discover</code></div>
            </div>
            <p class="small">Browsers cannot do mDNS natively. They connect to a known endpoint or scan a QR code.</p>
        </div>
    </section>

    <section id="timing">
        <div class="container">
            <h3>Synchronized</h3>
            <h2>Clock Sync Built In</h2>
            <p>CLASP uses NTP-style clock synchronization so all devices agree on time. Schedule bundles for future execution with microsecond precision.</p>
            <div class="timing-diagram fade-in">
                <div class="timing-visual">
                    <div class="timing-line"></div>
                    <div class="timing-node"><div class="label">Client</div><div class="time">T1</div></div>
                    <div class="timing-node"><div class="label">Server</div><div class="time">T2, T3</div></div>
                    <div class="timing-node"><div class="label">Client</div><div class="time">T4</div></div>
                </div>
                <div class="timing-formula"><strong>offset</strong> = ((T2 - T1) + (T3 - T4)) / 2</div>
            </div>
            <p>Target accuracy: plus or minus 1ms on wired LAN, plus or minus 5-10ms on WiFi. Bundles execute within plus or minus 1ms of scheduled time.</p>
        </div>
    </section>

    <section id="messages">
        <div class="container">
            <h3>Protocol</h3>
            <h2>Message Types</h2>
            <p>CLASP defines a compact set of message types for all operations.</p>
            <div class="message-grid stagger fade-in">
                <div class="message-item"><div class="code-hex">0x01</div><div class="name">HELLO</div><div class="desc">Connect</div></div>
                <div class="message-item"><div class="code-hex">0x02</div><div class="name">WELCOME</div><div class="desc">Accept</div></div>
                <div class="message-item"><div class="code-hex">0x10</div><div class="name">SUBSCRIBE</div><div class="desc">Listen</div></div>
                <div class="message-item"><div class="code-hex">0x20</div><div class="name">PUBLISH</div><div class="desc">Send signal</div></div>
                <div class="message-item"><div class="code-hex">0x21</div><div class="name">SET</div><div class="desc">Set param</div></div>
                <div class="message-item"><div class="code-hex">0x22</div><div class="name">GET</div><div class="desc">Read value</div></div>
                <div class="message-item"><div class="code-hex">0x30</div><div class="name">BUNDLE</div><div class="desc">Atomic group</div></div>
                <div class="message-item"><div class="code-hex">0x40</div><div class="name">SYNC</div><div class="desc">Clock sync</div></div>
            </div>
        </div>
    </section>

    <section id="latency">
        <div class="container">
            <h3>Performance</h3>
            <h2>Sub-Millisecond Latency</h2>
            <p>Measured on localhost, M-series Mac. Real-world results vary with network conditions.</p>
            <div class="latency-grid stagger fade-in">
                <div class="latency-card"><div class="latency-value">&lt;1</div><div class="latency-unit">microsecond</div><div class="latency-label">SET (P50)</div><div 
class="latency-context">fire and forget</div></div>
                <div class="latency-card"><div class="latency-value">34</div><div class="latency-unit">microseconds</div><div class="latency-label">Single Hop 
(P50)</div><div class="latency-context">pub to sub via router</div></div>
                <div class="latency-card"><div class="latency-value">1.3</div><div class="latency-unit">milliseconds</div><div class="latency-label">Fanout to 10</div><div 
class="latency-context">all subscribers receive</div></div>
                <div class="latency-card"><div class="latency-value">74k</div><div class="latency-unit">msg/sec</div><div class="latency-label">Throughput</div><div 
class="latency-context">sustained, single client</div></div>
            </div>
            <p class="small">CLASP is designed for soft realtime creative applications: VJ software, stage lighting, music production, interactive installations.</p>
        </div>
    </section>

    <section id="bridges">
        <div class="container">
            <h3>Translation</h3>
            <h2>Protocol Bridges</h2>
            <p>Bridges translate legacy protocols to and from CLASP. Your existing gear keeps working.</p>
            <div class="bridge-diagram fade-in">
                <div class="bridge-visual">
                    <div class="bridge-row"><div class="bridge-protocol">MIDI Note On</div><div class="bridge-arrow">-></div><div class="bridge-clasp">/midi/device/note { 
note, velocity, channel }</div></div>
                    <div class="bridge-row"><div class="bridge-protocol">OSC /synth/cutoff</div><div class="bridge-arrow">-></div><div 
class="bridge-clasp">/osc/synth/cutoff 0.5</div></div>
                    <div class="bridge-row"><div class="bridge-protocol">DMX Ch 47 = 255</div><div class="bridge-arrow">-></div><div class="bridge-clasp">/dmx/1/47 
255</div></div>
                    <div class="bridge-row"><div class="bridge-protocol">MQTT sensors/temp</div><div class="bridge-arrow">-></div><div 
class="bridge-clasp">/mqtt/sensors/temp 23.5</div></div>
                </div>
            </div>
        </div>
    </section>

    <section id="transports">
        <div class="container">
            <h3>Transport Agnostic</h3>
            <h2>Bring Your Own Network</h2>
            <p>CLASP is a binary frame format that works over any byte transport. Use what fits your environment.</p>
            <div class="transport-grid stagger fade-in">
                <div class="transport-card"><h4>WebSocket</h4><p>Universal, browsers</p></div>
                <div class="transport-card"><h4>WebRTC</h4><p>P2P, NAT traversal</p></div>
                <div class="transport-card"><h4>QUIC</h4><p>Mobile, 0-RTT</p></div>
                <div class="transport-card"><h4>UDP</h4><p>Low latency, LAN</p></div>
                <div class="transport-card"><h4>TCP</h4><p>Reliable delivery</p></div>
                <div class="transport-card"><h4>Serial</h4><p>Hardware, UART</p></div>
                <div class="transport-card"><h4>BLE</h4><p>Wireless sensors</p></div>
            </div>
            <p>An embedded device speaking only UDP is a valid CLASP implementation. The protocol does not care how bytes arrive.</p>
        </div>
    </section>

    <section id="cross-lang">
        <div class="container">
            <h3>Polyglot</h3>
            <h2>Write in Your Language</h2>
            <p>CLASP clients exist for JavaScript, Python, and Rust. They all speak the same protocol.</p>
            <div class="lang-tabs">
                <button class="active" data-lang="js">JavaScript</button>
                <button data-lang="python">Python</button>
                <button data-lang="rust">Rust</button>
            </div>
            <div class="code-panel active" id="code-js"><span class="keyword">import</span> { ClaspBuilder } <span class="keyword">from</span> <span 
class="string">'@clasp-to/core'</span>;

<span class="comment">// Connect to router</span>
<span class="keyword">const</span> <span class="variable">client</span> = <span class="keyword">await new</span> <span class="function">ClaspBuilder</span>(<span 
class="string">'ws://localhost:7330'</span>)
  .<span class="function">withName</span>(<span class="string">'Web Controller'</span>)
  .<span class="function">connect</span>();

<span class="comment">// Set a value</span>
<span class="keyword">await</span> <span class="variable">client</span>.<span class="function">set</span>(<span class="string">'/lights/brightness'</span>, <span 
class="number">0.8</span>);

<span class="comment">// Subscribe to changes with wildcards</span>
<span class="variable">client</span>.<span class="function">on</span>(<span class="string">'/sensors/**'</span>, (<span class="variable">value</span>, <span 
class="variable">address</span>) => {
  <span class="variable">console</span>.<span class="function">log</span>(<span class="string">`${address}: ${value}`</span>);
});</div>
            <div class="code-panel" id="code-python"><span class="keyword">import</span> asyncio
<span class="keyword">from</span> clasp <span class="keyword">import</span> ClaspBuilder

<span class="keyword">async def</span> <span class="function">main</span>():
    <span class="comment"># Connect to router</span>
    <span class="variable">client</span> = <span class="keyword">await</span> (
        <span class="function">ClaspBuilder</span>(<span class="string">'ws://localhost:7330'</span>)
        .<span class="function">with_name</span>(<span class="string">'Sensor Node'</span>)
        .<span class="function">connect</span>()
    )

    <span class="comment"># Publish sensor data</span>
    <span class="keyword">await</span> <span class="variable">client</span>.<span class="function">set</span>(<span class="string">'/sensors/temp'</span>, <span 
class="number">23.5</span>)

    <span class="comment"># React to changes</span>
    <span class="decorator">@client.on</span>(<span class="string">'/lights/*'</span>)
    <span class="keyword">def</span> <span class="function">on_light</span>(<span class="variable">value</span>, <span class="variable">address</span>):
        <span class="function">print</span>(<span class="string">f'{address}: {value}'</span>)

asyncio.<span class="function">run</span>(<span class="function">main</span>())</div>
            <div class="code-panel" id="code-rust"><span class="keyword">use</span> clasp_client::{Clasp, ClaspBuilder};
<span class="keyword">use</span> clasp_core::Value;

<span class="keyword">#[tokio::main]</span>
<span class="keyword">async fn</span> <span class="function">main</span>() -> anyhow::Result<()> {
    <span class="comment">// Connect to router</span>
    <span class="keyword">let</span> <span class="variable">client</span> = <span class="function">ClaspBuilder::new</span>(<span 
class="string">"ws://localhost:7330"</span>)
        .<span class="function">name</span>(<span class="string">"Rust Controller"</span>)
        .<span class="function">connect</span>()
        .<span class="keyword">await</span>?;

    <span class="comment">// Set a value</span>
    <span class="variable">client</span>.<span class="function">set</span>(<span class="string">"/app/status"</span>, Value::String(<span 
class="string">"running"</span>.into())).<span class="keyword">await</span>?;

    <span class="comment">// Subscribe with wildcards</span>
    <span class="variable">client</span>.<span class="function">subscribe</span>(<span class="string">"/app/**"</span>, |<span class="variable">value</span>, <span 
class="variable">addr</span>| {
        <span class="function">println!</span>(<span class="string">"{} = {:?}"</span>, <span class="variable">addr</span>, <span class="variable">value</span>);
    }).<span class="keyword">await</span>?;

    Ok(())
}</div>
        </div>
    </section>

    <section id="protocols">
        <div class="container">
            <h3>Supported Protocols</h3>
            <h2>Speaks Everything</h2>
            <p>Native bidirectional support for the protocols creative tools actually use.</p>
            <div class="protocol-grid stagger fade-in">
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg><h4>OSC</h4><p>UDP, 
bundles, all types</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><rect x="2" y="10" width="20" height="10" rx="2"/><path d="M6 10V6a2 2 0 012-2h8a2 
2 0 012 2v4"/></svg><h4>MIDI</h4><p>Notes, CC, sysex</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M12 2v4M12 18v4M2 12h4M18 
12h4"/></svg><h4>Art-Net</h4><p>DMX over Ethernet</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 
2-2z"/></svg><h4>DMX</h4><p>USB interfaces</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg><h4>MQTT</h4><p>v3.1.1/v5, TLS</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><path d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 
3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/></svg><h4>WebSocket</h4><p>JSON or binary</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" 
y2="12"/></svg><h4>Socket.IO</h4><p>v4, rooms</p></div>
                <div class="protocol-card"><svg class="icon icon-lg" viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 
1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/></svg><h4>HTTP</h4><p>REST API, CORS</p></div>
            </div>
        </div>
    </section>

    <section id="cta">
        <div class="container">
            <h2>Get Started</h2>
            <p>CLASP is open source under MIT/Apache-2.0 dual license. Install via your preferred package manager.</p>
            <div class="install-cmd" onclick="copyInstall(this)" data-cmd="cargo install clasp-cli">
                <span class="prompt">$</span>
                <code>cargo install clasp-cli</code>
                <span class="copy-hint">click to copy</span>
            </div>
            <div class="cta-buttons">
                <a href="https://github.com/lumencanvas/clasp" class="btn btn-primary" target="_blank">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0020 4.77 
5.07 5.07 0 0019.91 1S18.73.65 16 2.48a13.38 13.38 0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 005 4.77a5.44 5.44 0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 009 
18.13V22"/></svg>
                    GitHub
                </a>
                <a href="https://clasp.to" class="btn btn-secondary" target="_blank">
                    <svg class="icon" viewBox="0 0 24 24"><path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/><path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/></svg>
                    Documentation
                </a>
            </div>
            <p class="small" style="margin-top: 3rem;">Also available via npm (<code>@clasp-to/core</code>), PyPI (<code>clasp-to</code>), and as a desktop app.</p>
        </div>
    </section>

    <footer>CLASP is maintained by <a href="https://lumencanvas.studio" target="_blank">LumenCanvas</a></footer>

    <script>
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.2 });

        document.querySelectorAll('.fade-in, .stagger').forEach(el => observer.observe(el));

        const signalData = {
            param: {
                title: 'Param: State with Conflict Resolution',
                desc: 'Every Param has a current value, a revision number, and knows who wrote it. When two clients write simultaneously, the router resolves conflicts 
using configurable strategies: last-write-wins, max value, min value, or exclusive locks.',
                desc2: 'Late joiners automatically receive current state. Disconnect and reconnect without losing everything.',
                code: `{
  address: "/lights/brightness",
  value: 0.75,
  revision: 42,
  writer: "session:abc",
  timestamp: 1704067200
}`
            },
            event: {
                title: 'Event: Ephemeral Triggers',
                desc: 'Events happen and are gone. They must be delivered (confirmed by default) but are never stored. Perfect for cues, button presses, and one-shot 
actions.',
                desc2: 'If you disconnect when an event fires, you miss it. That is by design.',
                code: `{
  address: "/lumen/cue/fire",
  payload: {
    cue: "intro",
    transition: "fade"
  },
  timestamp: 1704067200
}`
            },
            stream: {
                title: 'Stream: High-Rate Continuous Data',
                desc: 'Streams are for continuous data where occasional packet loss is acceptable. Samples can be batched for efficiency. Subscribers can request 
downsampling or delta-only updates.',
                desc2: 'Great for faders, sensors, and any data updating faster than 30Hz.',
                code: `{
  address: "/controller/fader/1",
  samples: [0.50, 0.52, 0.55, 0.58],
  rate: 60,
  timestamp: 1704067200
}`
            },
            gesture: {
                title: 'Gesture: Phased Input',
                desc: 'Gestures are streams with semantic phases: start, move, end, cancel. Designed for touch, pen, and motion input. Each gesture has a stable ID across 
its lifetime.',
                desc2: 'Routers may coalesce move phases to reduce bandwidth. Start and end are never coalesced.',
                code: `{
  address: "/input/touch",
  id: 1,
  phase: "move",
  payload: {
    position: [0.5, 0.3],
    pressure: 0.8
  },
  timestamp: 1704067200
}`
            },
            timeline: {
                title: 'Timeline: Time-Indexed Automation',
                desc: 'Timelines are sequences of keyframes with timestamps and easing curves. Use them for automation, cue sequences, and scheduled state changes.',
                desc2: 'Timelines are immutable once published. To modify, publish a new timeline.',
                code: `{
  address: "/scene/0/layer/3/opacity",
  type: "timeline",
  keyframes: [
    { time: 0, value: 1.0, easing: "linear" },
    { time: 1000000, value: 0.0, easing: "ease-out" }
  ],
  loop: false,
  startTime: 1704067200
}`
            }
        };

        document.querySelectorAll('.signal-selector button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.signal-selector button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const data = signalData[btn.dataset.signal];
                document.getElementById('signal-info').innerHTML = `<h4>${data.title}</h4><p>${data.desc}</p><p>${data.desc2}</p>`;
                document.getElementById('signal-code').textContent = data.code;
            });
        });

        document.querySelectorAll('.lang-tabs button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.lang-tabs button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.querySelectorAll('.code-panel').forEach(p => p.classList.remove('active'));
                document.getElementById(`code-${btn.dataset.lang}`).classList.add('active');
            });
        });

        document.querySelectorAll('.protocol-box').forEach(box => {
            box.addEventListener('mouseenter', () => box.style.transform = `rotate(${Math.random() * 6 - 3}deg) scale(1.05)`);
            box.addEventListener('mouseleave', () => box.style.transform = '');
        });

        document.querySelectorAll('.protocol-node').forEach(node => {
            node.addEventListener('click', () => {
                node.classList.toggle('active');
                const router = document.querySelector('.router-core');
                router.style.animation = 'none';
                router.offsetHeight;
                router.style.animation = 'routerPulse 0.5s ease-in-out';
            });
        });

        function copyInstall(el) {
            navigator.clipboard.writeText(el.dataset.cmd).then(() => {
                const hint = el.querySelector('.copy-hint');
                hint.textContent = 'copied!';
                setTimeout(() => hint.textContent = 'click to copy', 2000);
            });
        }
    </script>
</body>
</html>
